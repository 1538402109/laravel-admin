webpackJsonp([5],{A8p5:function(e,t,a){var l=a("VU/8")(a("Zwvr"),a("kUZg"),!1,null,null,null);e.exports=l.exports},Zwvr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={mounted:function(){this.getList(),this.getGroupList()},data:function(){return{tableData:[],form:{page:1,pageSize:20},addNewDialog:!1,saveForm:{id:"",username:"",password:"",groups:[],status:!0},totalItems:0,groups:[],auth:{},rulesForm:{username:[{required:!0,message:"请输入用户名称",trigger:"blur"}],realname:[{required:!0,message:"请输入真实姓名",trigger:"blur"}],groups:[{required:!0,message:"请选择用户组",trigger:"blur"}]}}},methods:{onSearch:function(){this.form.page=1,this.getList()},handleSizeChange:function(e){this.form.pageSize=e,this.getList()},handleCurrentChange:function(e){this.form.page=e,this.getList()},onSubmit:function(){var e=this;this.$refs.saveForm.validate(function(t){if(!t)return console.log("error submit!!"),!1;void 0===e.saveForm.password&&(e.saveForm.password=""),!e.saveForm.id&&e.saveForm.password.length<6?e.$message({message:"请输入不少于6位的密码",type:"error"}):e.$http.post("/api/system/admin/save",e.saveForm).then(function(t){0===t.error?(e.$message({message:"保存成功",type:"success"}),e.addNewDialog=!1,e.getList()):e.$message({message:t.msg,type:"error"})})})},getGroupList:function(){var e=this;this.$http.get("/api/system/group/list",{status:1}).then(function(t){e.groups=t.data.list})},getList:function(){var e=this;this.$http.get("/api/system/admin/list",this.form).then(function(t){e.tableData=t.data.data,e.totalItems=t.data.total,e.auth=t.data.auth})},handleAdd:function(){this.addNewDialog=!0,void 0!==this.$refs.saveForm&&this.$refs.saveForm.resetFields()},editRow:function(e){this.addNewDialog=!0,void 0!==this.$refs.saveForm&&this.$refs.saveForm.resetFields(),this.saveForm={id:e.id,username:e.username,groups:e.groups,realname:e.realname,mobile:e.mobile,email:e.email,status:1===e.status}}}}},kUZg:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{attrs:{inline:!0,model:e.form,size:"small"}},[a("el-form-item",{attrs:{label:"ID"}},[a("el-input",{attrs:{placeholder:"ID"},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"登录名"}},[a("el-input",{attrs:{placeholder:"请输入登录名"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"真实姓名"}},[a("el-input",{attrs:{placeholder:"请输入真实姓名"},model:{value:e.form.realname,callback:function(t){e.$set(e.form,"realname",t)},expression:"form.realname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号"}},[a("el-input",{attrs:{placeholder:"请输入手机号"},model:{value:e.form.mobile,callback:function(t){e.$set(e.form,"mobile",t)},expression:"form.mobile"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱"}},[a("el-input",{attrs:{placeholder:"请输入邮箱"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSearch}},[e._v("查询")])],1)],1),e._v(" "),a("el-row",[e.auth.canAdd?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.handleAdd}},[e._v("新增")]):e._e()],1),e._v(" "),a("el-table",{attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"username",label:"用户名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"realname",label:"真实姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mobile",label:"手机号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"email",label:"邮箱"}}),e._v(" "),a("el-table-column",{attrs:{label:"用户状态",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.status?a("el-tag",{attrs:{type:"success",size:"small"}},[e._v("正常")]):e._e(),e._v(" "),0==t.row.status?a("el-tag",{attrs:{type:"info",size:"small"}},[e._v("禁用")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"last_login",label:"最后登录时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"last_ip",label:"登录IP"}}),e._v(" "),a("el-table-column",{attrs:{prop:"create_time",label:"创建时间"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.auth.canEdit?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.editRow(t.row)}}},[e._v("编辑")]):e._e()]}}])})],1),e._v(" "),a("br"),e._v(" "),a("el-row",[a("el-col",{attrs:{span:13,offset:11}},[a("el-pagination",{attrs:{background:"","current-page":e.form.page,"page-sizes":[25,50,100],"page-size":e.form.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalItems},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),a("br"),e._v(" "),a("el-dialog",{attrs:{title:"新增/修改管理员",visible:e.addNewDialog,width:"35%"},on:{"update:visible":function(t){e.addNewDialog=t}}},[a("el-form",{ref:"saveForm",attrs:{model:e.saveForm,"label-width":"100px",size:"small",rules:e.rulesForm}},[a("el-form-item",{attrs:{label:"登录名",prop:"username"}},[a("el-input",{staticStyle:{width:"50%"},model:{value:e.saveForm.username,callback:function(t){e.$set(e.saveForm,"username",t)},expression:"saveForm.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{staticStyle:{width:"50%"},model:{value:e.saveForm.password,callback:function(t){e.$set(e.saveForm,"password",t)},expression:"saveForm.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户组",prop:"groups"}},[a("el-select",{staticStyle:{width:"50%"},attrs:{multiple:"",placeholder:"请选择"},model:{value:e.saveForm.groups,callback:function(t){e.$set(e.saveForm,"groups",t)},expression:"saveForm.groups"}},e._l(e.groups,function(e){return a("el-option",{key:e.id,attrs:{label:e.title,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"真实姓名",prop:"realname"}},[a("el-input",{staticStyle:{width:"50%"},model:{value:e.saveForm.realname,callback:function(t){e.$set(e.saveForm,"realname",t)},expression:"saveForm.realname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号",prop:"mobile"}},[a("el-input",{staticStyle:{width:"50%"},model:{value:e.saveForm.mobile,callback:function(t){e.$set(e.saveForm,"mobile",t)},expression:"saveForm.mobile"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[a("el-input",{staticStyle:{width:"50%"},model:{value:e.saveForm.email,callback:function(t){e.$set(e.saveForm,"email",t)},expression:"saveForm.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-switch",{attrs:{"active-text":"正常","inactive-text":"禁用"},model:{value:e.saveForm.status,callback:function(t){e.$set(e.saveForm,"status",t)},expression:"saveForm.status"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("保存")]),e._v(" "),a("el-button",{on:{click:function(t){e.addNewDialog=!1}}},[e._v("取消")])],1)],1)],1)],1)},staticRenderFns:[]}}});